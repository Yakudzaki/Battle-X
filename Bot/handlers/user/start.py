from loader import dp, bot
from aiogram import types
from aiogram.dispatcher.filters import CommandStart
from loguru import logger
from utils.db.db_utils import create_user, user_exists

# –°—Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ —é–∑–µ—Ä–∞ –Ω–µ—Ç –≤ –±–¥
@dp.message_handler(lambda m: user_exists(m.from_user.id) is False)
async def start(message: types.Message):
    user_id = message.from_user.id
    create_user(user_id)
    await message.answer('–ü—Ä–∏–≤–µ—Ç! üëã\n'
        'ü§ñ –Ø –±–æ—Ç-–º–∞–≥–∞–∑–∏–Ω –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞! –ó–∞—Ä–∞–±–æ—Ç–∞–π –¥–µ–Ω—å–≥–∏ –∏–≥—Ä–∞—è –≤ –∏–≥—Ä—ã.\n'
        'üìå –ß—Ç–æ –±—ã –ø–æ–ø–∞—Å—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å–æ –≤—Å–µ–º–∏ –∏–≥—Ä–∞–º–∏ –∏ —Ç.–¥ –≤–æ–∑–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π /menu.\n'
        'üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–∫–∞—Å—Å—É, –°–±–µ—Ä–±–∞–Ω–∫ –∏–ª–∏ Qiwi.\n'
        '‚ùì –í–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã? –ù–µ –ø—Ä–æ–±–ª–µ–º–∞! –ö–æ–º–∞–Ω–¥–∞ /report(–°–æ–æ–±—â–µ–Ω–∏–µ) –ø–æ–º–æ–∂–µ—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—Ç–∞—Ä–∞—é—Ç—Å—è –∫–∞–∫ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è.\n\n\n'
        'ü§ù –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–≥–æ –±–æ—Ç–∞? –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º <a href="https://t.me/Yakudza_Drill">Yakudza</a>')


@dp.message_handler(CommandStart())
async def start(message: types.Message):
    await message.answer('–ü—Ä–∏–≤–µ—Ç! üëã\n'
        'ü§ñ –Ø –±–æ—Ç-–º–∞–≥–∞–∑–∏–Ω –¥–ª—è –∑–∞—Ä–∞–±–æ—Ç–∫–∞! –ó–∞—Ä–∞–±–æ—Ç–∞–π –¥–µ–Ω—å–≥–∏ –∏–≥—Ä–∞—è –≤ –∏–≥—Ä—ã.\n'
        'üìå –ß—Ç–æ –±—ã –ø–æ–ø–∞—Å—Ç—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å–æ –≤—Å–µ–º–∏ –∏–≥—Ä–∞–º–∏ –∏ —Ç.–¥ –≤–æ–∑–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π /menu.\n'
        'üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å.–∫–∞—Å—Å—É, –°–±–µ—Ä–±–∞–Ω–∫ –∏–ª–∏ Qiwi.\n'
        '‚ùì –í–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã? –ù–µ –ø—Ä–æ–±–ª–µ–º–∞! –ö–æ–º–∞–Ω–¥–∞ /report(–°–æ–æ–±—â–µ–Ω–∏–µ) –ø–æ–º–æ–∂–µ—Ç —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Å—Ç–∞—Ä–∞—é—Ç—Å—è –∫–∞–∫ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –æ—Ç–∫–ª–∏–∫–Ω—É—Ç—å—Å—è.\n\n\n'
        'ü§ù –ó–∞–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–≥–æ –±–æ—Ç–∞? –°–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º <a href="https://t.me/Yakudza_Drill">Yakudza</a>')